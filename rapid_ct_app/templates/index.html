{% extends "layout.html" %}

<!--css-->
{% block css %}
    {{ dropzone.load_css() }}
    {{ dropzone.style('border: 2px dashed #0087F7; margin: 10%; min-height: 400px;') }} 
{% endblock css %}
<!--css end-->

<!--page content-->
{% block content %}

    <div class="col-md-12">
        <h1 class="page-title text-secondary text-center mt-2">Dashboard</h1>
        <hr>
    </div>

    <div class="mt-4">  
        <div class="row d-flex ml-4 mr-4" style="justify-content: center">
            <div class=" mt-4 row mb-5">
                <div class="col-md-4 mb-2 d-flex" style="justify-content: center">
                    <h3><strong class="d-inline-block mb-2 text-secondary text-center">Bleed</strong></h3>
                    <svg id="fillgauge1" width="100%" height="150" onclick=""></svg>
                </div>
                <div class="col-md-4 mb-2 d-flex" style="justify-content: center">
                    <h3><strong class="d-inline-block mb-2 text-secondary text-center">Control</strong></h3>
                    <svg id="fillgauge2" width="100%" height="150" onclick=""></svg>        
                </div>
                <div class="col-md-4 mb-2 d-flex" style="justify-content: center">
                    <h3><strong class="d-inline-block mb-2 text-secondary text-center">Others</strong></h3>
                    <svg id="fillgauge3" width="100%" height="150" onclick=""></svg>
                </div>
            </div>
        </div>
        <hr>
        <div class="card flex-md-row mb-4 box-shadow h-md-250 col-md-12 mr-auto">
            <div class="card-body d-flex flex-column align-items-center">
                <h3><strong class="d-inline-block mb-2 text-secondary">Contribute Data</strong></h3>
                <small><strong class="text-danger">NOTE: Only upload anonymised data.</strong></small>
                <div class="row mt-2">
                    <div class="col-md-12">
                        <div class="btn-toolbar" role="toolbar">
                            <div class="btn-group btn-group-lg btn-group-vertical">
                                <button type="button" class="btn btn-info mr-auto" data-toggle="modal" data-target="#bleed">
                                    ICH
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btn btn-info ml-auto" data-toggle="modal" data-target="#control">
                                    Control
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btn btn-info ml-auto" data-toggle="modal" data-target="#lesion">
                                    Lesion
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                </button>
                                <button type="button" class="btn btn-info btn-sm ml-auto" data-toggle="modal" data-target="#calcification">
                                    Calcification
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Modal bleed -->
                        <div id="bleed" class="modal fade" role="dialog">
                            <div class="modal-dialog modal-lg">
                                <!-- Modal bleed-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="text-secondary">
                                            Adding files...<br> 
                                            <strong>Catagory: ICH (bleed)</strong>
                                        </h5>
                                        <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        
                                        {{ dropzone.create(action='files.add_bleed') }}
                                        
                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal control -->
                        <div id="control" class="modal fade" role="dialog">
                            <div class="modal-dialog modal-lg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="text-secondary">
                                            Adding files...<br> 
                                            <strong>Catagory: Control(Normal)</strong>
                                        </h5>
                                        <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                                    
                                    </div>
                                    <div class="modal-body">
                                        
                                        {{ dropzone.create(action='files.add_control') }}
                                        
                                    </div>
                                    <div class="modal-footer">
                                    
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                        <!-- Modal lesion -->
                        <div id="lesion" class="modal fade" role="dialog">
                            <div class="modal-dialog modal-lg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="text-secondary">
                                            Adding files...<br> 
                                            <strong>Catagory: Calcification (No ICH - visible Calcification)</strong>
                                        </h5>
                                        <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        {{ dropzone.create(action='files.add_lesion') }}
                                    </div>
                                    <div class="modal-footer">
                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal calcification -->
                        <div id="calcification" class="modal fade" role="dialog">
                            <div class="modal-dialog modal-lg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="text-secondary">
                                            Adding files...<br> 
                                            <strong>Catagory: Lesion (No ICH - visible Lesion)</strong>
                                        </h5>
                                        <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        {{ dropzone.create(action='files.add_calcification') }}
                                    </div>
                                    <div class="modal-footer">
                                    
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                    </div>
                </div>
                <small class="text-muted margin-top mt-2">
                    Upload DICOM files as per sample catagory <br>
                </small>
            </div>
        </div>

        <div class="card flex-md-row mb-4 box-shadow col-md-12">
            <div class="card-body d-flex flex-column align-items-center">
                <h3><strong class="d-inline-block mb-2 text-secondary">Predict ICH</strong></h3>
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" class="btn btn-secondary btn-lg btn-block mt-2" style="width: 100%" data-toggle="modal" data-target="#submit-jobs">
                            Submit Jobs
                            <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
                        </button>
                        <!-- Modal submit jobs -->
                        <div id="submit-jobs" class="modal fade" role="dialog">
                            <div class="modal-dialog modal-lg">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                    <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                                    
                                    </div>
                                    <div class="modal-body">
                                    
                                    </div>
                                    <div class="modal-footer">
                                    
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
<!--page content end-->

<!--js-->
{% block js %}

    {{ dropzone.load_js() }}
    {{ dropzone.config() }}
    
    <script>
        var maxcount = {{ all_count }};
    </script>
    
    <script src="{{ url_for('static', filename='js/fillgauge.js') }}"></script>

    <script>
        var gauge1 = loadLiquidFillGauge("fillgauge1", {{ all_bleed_count }}, config_danger);
        var gauge2 = loadLiquidFillGauge("fillgauge2", {{ all_normal_count }}, config_info);
        var gauge3 = loadLiquidFillGauge("fillgauge3", {{ all_other_files_count }}, config_warning);
    </script>
    

{% endblock js %}